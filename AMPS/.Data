; ===========================================================================
; ---------------------------------------------------------------------------
; Flags section. None of this is required, but I added it here to
; make it easier to debug built ROMS! If you would like easier
; assistance from Natsumi, please keep this section intact!
; ---------------------------------------------------------------------------
	dc.b "AMPS-v2.1"		; ident str

	if safe
		dc.b "s"		; safe mode enabled

	else
		dc.b " "		; safe mode disabled
	endif

	if FEATURE_FM6
		dc.b "F6"		; FM6 enabled
	endif

	if FEATURE_SFX_MASTERVOL
		dc.b "SM"		; sfx ignore master volume
	endif

	if FEATURE_UNDERWATER
		dc.b "UW"		; underwater mode enabled
	endif

	if FEATURE_MODULATION
		dc.b "MO"		; modulation enabled
	endif

	if FEATURE_DACFMVOLENV
		dc.b "VE"		; FM & DAC volume envelope enabled
	endif

	if FEATURE_MODENV
		dc.b "ME"		; modulation envelope enabled
	endif

	if FEATURE_PORTAMENTO
		dc.b "PM"		; portamento enabled
	endif

	if FEATURE_BACKUP
		dc.b "BA"		; backup enabled
	endif

	if FEATURE_SOUNDTEST
		dc.b "ST"		; soundtest enabled
	endif
; ===========================================================================
; ---------------------------------------------------------------------------
; Define music and SFX
; ---------------------------------------------------------------------------

	opt oz-				; disable zero-offset optimization
	if safe=0
		nolist			; if in safe mode, list data section.
	endif

__mus =		MusOff

MusicIndex:

mus_GHZ equ	__mus
__mus =	__mus+1
		dc.l (($30)<<24)|_mus_GHZ
mus_LZ equ	__mus
__mus =	__mus+1
		dc.l (($26)<<24)|_mus_LZ
mus_MZ equ	__mus
__mus =	__mus+1
		dc.l (($1A)<<24)|_mus_MZ
mus_SLZ equ	__mus
__mus =	__mus+1
		dc.l (($20)<<24)|_mus_SLZ
mus_SYZ equ	__mus
__mus =	__mus+1
		dc.l (($49)<<24)|_mus_SYZ
mus_SBZ equ	__mus
__mus =	__mus+1
		dc.l (($13)<<24)|_mus_SBZ
mus_FZ equ	__mus
__mus =	__mus+1
		dc.l (($18)<<24)|_mus_FZ


mus_Boss equ	__mus
__mus =	__mus+1
		dc.l (($12)<<24)|_mus_Boss
mus_SS equ	__mus
__mus =	__mus+1
		dc.l (($20)<<24)|_mus_SS
mus_Invincibility equ	__mus
__mus =	__mus+1
		dc.l (($20)<<24)|_mus_Invincibility
mus_Drowning equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_Drowning


mus_Title equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_Title
mus_GotThroughAct equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_GotThroughAct
mus_Emerald equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_Emerald
mus_ExtraLife equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_ExtraLife


mus_GameOver equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_GameOver
mus_Continue equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_Continue
mus_Ending equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_Ending
mus_Credits equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_Credits
mus_SEGA equ	__mus
__mus =	__mus+1
		dc.l (($00)<<24)|_mus_SEGA


MusCount =	__mus-MusOff		; number of installed music tracks
SFXoff =	__mus			; first SFX ID
__sfx =		SFXoff
; ---------------------------------------------------------------------------

SoundIndex:
	
sfx_RingRight equ	__sfx
__sfx =	__sfx+1
		dc.l (($01)<<24)|_sfx_RingRight

	
sfx_RingLeft equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_RingLeft
sfx_RingLoss equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_RingLoss
sfx_Splash equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Splash
sfx_Break equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Break
sfx_Jump equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Jump
sfx_Roll equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Roll

	
sfx_Skid equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Skid
sfx_Bubble equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Bubble
sfx_Drown equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Drown
sfx_SpikeHit equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_SpikeHit
sfx_Death equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Death
sfx_AirDing equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_AirDing

	
sfx_Register equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Register
sfx_Bonus equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Bonus
sfx_Shield equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Shield
sfx_Dash equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Dash
sfx_BossHit equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_BossHit
sfx_Switch equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Switch

	
sfx_Signpost equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Signpost
sfx_Lamppost equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Lamppost
sfx_BigRing equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_BigRing
sfx_Bumper equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Bumper
sfx_Spring equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Spring

	
sfx_Collapse equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Collapse
sfx_Smash equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Smash
sfx_Basaran equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Basaran
sfx_BuzzExplode equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_BuzzExplode
sfx_Explode equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Explode

	
sfx_Electricity equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Electricity
sfx_Flame equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Flame
sfx_LavaBall equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_LavaBall
sfx_SpikeMove equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_SpikeMove
sfx_Rumble equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Rumble

	
sfx_Door equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Door
sfx_Stomp equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Stomp
sfx_Chain equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Chain
sfx_Saw equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Saw
sfx_Lava equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Lava


	
sfx_EnterSS equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_EnterSS
sfx_Goal equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Goal
sfx_ActionBlock equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_ActionBlock
sfx_Diamonds equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Diamonds
sfx_Continue equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_Continue


; SFX with special features
	
sfx_PushBlock equ	__sfx
__sfx =	__sfx+1
		dc.l (($80)<<24)|_sfx_PushBlock


; unused SFX
	
sfx_UnkA2 equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_UnkA2
sfx_UnkAB equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_UnkAB
sfx_UnkB8 equ	__sfx
__sfx =	__sfx+1
		dc.l ((0)<<24)|_sfx_UnkB8


SFXcount =	__sfx-SFXoff		; number of intalled sound effects
SFXlast =	__sfx
; ===========================================================================
; ---------------------------------------------------------------------------
; Define samples
; ---------------------------------------------------------------------------

__samp =	$80
SampleList:
	sample $0000, Stop, Stop		; 80 - Stop sample (DO NOT EDIT)
	sample $0100, Kick, Stop		; 81 - Kick
	sample $0100, Snare, Stop		; 82 - Snare
	sample $0100, Timpani, Stop, HiTimpani	; 83 - Hi Timpani
	sample $00E6, Timpani, Stop, MidTimpani	; 84 - Timpani
	sample $00C2, Timpani, Stop, LowTimpani	; 85 - Low Timpani
	sample $00B6, Timpani, Stop, FloorTimpani; 86 - Floor Timpani
	sample $0100, Sega, Stop		; 87 - SEGA screen
; ===========================================================================
; ---------------------------------------------------------------------------
; Define volume envelopes and their data
; ---------------------------------------------------------------------------

vNone =		$00
__venv =	$01

VolEnvs:
	volenv 01, 02, 03, 04, 05, 06, 07, 08
	volenv 09
VolEnvs_End:
; ---------------------------------------------------------------------------

vd01:		dc.b $00, $00, $00, $08, $08, $08, $10, $10
		dc.b $10, $18, $18, $18, $20, $20, $20, $28
		dc.b $28, $28, $30, $30, $30, $38, eHold

vd02:		dc.b $00, $10, $20, $30, $40, $7F, eHold

vd03:		dc.b $00, $00, $08, $08, $10, $10, $18, $18
		dc.b $20, $20, $28, $28, $30, $30, $38, $38
		dc.b eHold

vd04:		dc.b $00, $00, $10, $18, $20, $20, $28, $28
		dc.b $28, $30, eHold

vd05:		dc.b $00, $00, $00, $00, $00, $00, $00, $00
		dc.b $00, $00, $08, $08, $08, $08, $08, $08
		dc.b $08, $08, $08, $08, $08, $08, $08, $08
		dc.b $10, $10, $10, $10, $10, $10, $10, $10
		dc.b $18, $18, $18, $18, $18, $18, $18, $18
		dc.b $20, eHold

vd06:		dc.b $18, $18, $18, $10, $10, $10, $10, $08
		dc.b $08, $08, $00, $00, $00, $00, eHold

vd07:		dc.b $00, $00, $00, $00, $00, $00, $08, $08
		dc.b $08, $08, $08, $10, $10, $10, $10, $10
		dc.b $18, $18, $18, $20, $20, $20, $28, $28
		dc.b $28, $30, $38, eHold

vd08:		dc.b $00, $00, $00, $00, $00, $08, $08, $08
		dc.b $08, $08, $10, $10, $10, $10, $10, $10
		dc.b $18, $18, $18, $18, $18, $20, $20, $20
		dc.b $20, $20, $28, $28, $28, $28, $28, $30
		dc.b $30, $30, $30, $30, $38, $38, $38, eHold

vd09:		dc.b $00, $08, $10, $18, $20, $28, $30, $38
		dc.b $40, $48, $50, $58, $60, $68, $70, $78
		dc.b eHold
		even
; ===========================================================================
; ---------------------------------------------------------------------------
; Define volume envelopes and their data
; ---------------------------------------------------------------------------

mNone =		$00
__menv =	$01

ModEnvs:
	modenv
ModEnvs_End:
; ---------------------------------------------------------------------------

	if FEATURE_MODENV

	endif

; ===========================================================================
; ---------------------------------------------------------------------------
; Include music, sound effects and voice bank
; ---------------------------------------------------------------------------

	include "AMPS/Voices.s2a"	; include universal voice bank
	opt ae-				; disable automatic evens
; ---------------------------------------------------------------------------

sfxaddr	
		even
_sfx_RingRight:	include "AMPS/sfx/RingRight.s2a"
		even
_sfx_RingLeft:	include "AMPS/sfx/RingLeft.s2a"
		even
_sfx_RingLoss:	include "AMPS/sfx/RingLoss.s2a"
		even
_sfx_Splash:	include "AMPS/sfx/Splash.s2a"
		even
_sfx_Break:	include "AMPS/sfx/Break.s2a"
		even
_sfx_Jump:	include "AMPS/sfx/Jump.s2a"
		even
_sfx_Roll:	include "AMPS/sfx/Roll.s2a"
		even
_sfx_Skid:	include "AMPS/sfx/Skid.s2a"
		even
_sfx_Bubble:	include "AMPS/sfx/Bubble.s2a"
		even
_sfx_Drown:	include "AMPS/sfx/Drown.s2a"
		even
_sfx_SpikeHit:	include "AMPS/sfx/SpikeHit.s2a"
		even
_sfx_Death:	include "AMPS/sfx/Death.s2a"
		even
_sfx_AirDing:	include "AMPS/sfx/AirDing.s2a"
		even
_sfx_Register:	include "AMPS/sfx/Register.s2a"
		even
_sfx_Bonus:	include "AMPS/sfx/Bonus.s2a"
		even
_sfx_Shield:	include "AMPS/sfx/Shield.s2a"
		even
_sfx_Dash:	include "AMPS/sfx/Dash.s2a"
		even
_sfx_BossHit:	include "AMPS/sfx/BossHit.s2a"
		even
_sfx_Switch:	include "AMPS/sfx/Switch.s2a"
		even
_sfx_Signpost:	include "AMPS/sfx/Signpost.s2a"
		even
_sfx_Lamppost:	include "AMPS/sfx/Lamppost.s2a"
		even
_sfx_BigRing:	include "AMPS/sfx/BigRing.s2a"
		even
_sfx_Bumper:	include "AMPS/sfx/Bumper.s2a"
		even
_sfx_Spring:	include "AMPS/sfx/Spring.s2a"
		even
_sfx_Collapse:	include "AMPS/sfx/Collapse.s2a"
		even
_sfx_Smash:	include "AMPS/sfx/Smash.s2a"
		even
_sfx_Basaran:	include "AMPS/sfx/Basaran.s2a"
		even
_sfx_BuzzExplode:	include "AMPS/sfx/BuzzExplode.s2a"
		even
_sfx_Explode:	include "AMPS/sfx/Explode.s2a"
		even
_sfx_Electricity:	include "AMPS/sfx/Electricity.s2a"
		even
_sfx_Flame:	include "AMPS/sfx/Flame.s2a"
		even
_sfx_LavaBall:	include "AMPS/sfx/LavaBall.s2a"
		even
_sfx_SpikeMove:	include "AMPS/sfx/SpikeMove.s2a"
		even
_sfx_Rumble:	include "AMPS/sfx/Rumble.s2a"
		even
_sfx_Door:	include "AMPS/sfx/Door.s2a"
		even
_sfx_Stomp:	include "AMPS/sfx/Stomp.s2a"
		even
_sfx_Chain:	include "AMPS/sfx/Chain.s2a"
		even
_sfx_Saw:	include "AMPS/sfx/Saw.s2a"
		even
_sfx_Lava:	include "AMPS/sfx/Lava.s2a"
		even
_sfx_EnterSS:	include "AMPS/sfx/EnterSS.s2a"
		even
_sfx_Goal:	include "AMPS/sfx/Goal.s2a"
		even
_sfx_ActionBlock:	include "AMPS/sfx/ActionBlock.s2a"
		even
_sfx_Diamonds:	include "AMPS/sfx/Diamonds.s2a"
		even
_sfx_Continue:	include "AMPS/sfx/Continue.s2a"
		even
_sfx_PushBlock:	include "AMPS/sfx/PushBlock.s2a"
		even
_sfx_UnkA2:	include "AMPS/sfx/UnkA2.s2a"
		even
_sfx_UnkAB:	include "AMPS/sfx/UnkAB.s2a"
		even
_sfx_UnkB8:	include "AMPS/sfx/UnkB8.s2a"
				; include all sfx
musaddr	
		even
_mus_GHZ:	include "AMPS/music/GHZ.s2a"
		even
_mus_LZ:	include "AMPS/music/LZ.s2a"
		even
_mus_MZ:	include "AMPS/music/MZ.s2a"
		even
_mus_SLZ:	include "AMPS/music/SLZ.s2a"
		even
_mus_SYZ:	include "AMPS/music/SYZ.s2a"
		even
_mus_SBZ:	include "AMPS/music/SBZ.s2a"
		even
_mus_FZ:	include "AMPS/music/FZ.s2a"
		even
_mus_Boss:	include "AMPS/music/Boss.s2a"
		even
_mus_SS:	include "AMPS/music/SS.s2a"
		even
_mus_Invincibility:	include "AMPS/music/Invincibility.s2a"
		even
_mus_Drowning:	include "AMPS/music/Drowning.s2a"
		even
_mus_Title:	include "AMPS/music/Title.s2a"
		even
_mus_GotThroughAct:	include "AMPS/music/GotThroughAct.s2a"
		even
_mus_Emerald:	include "AMPS/music/Emerald.s2a"
		even
_mus_ExtraLife:	include "AMPS/music/ExtraLife.s2a"
		even
_mus_GameOver:	include "AMPS/music/GameOver.s2a"
		even
_mus_Continue:	include "AMPS/music/Continue.s2a"
		even
_mus_Ending:	include "AMPS/music/Ending.s2a"
		even
_mus_Credits:	include "AMPS/music/Credits.s2a"
		even
_mus_SEGA:	include "AMPS/music/SEGA.s2a"
				; include all music
musend
; ===========================================================================
; ---------------------------------------------------------------------------
; Include samples and filters
; ---------------------------------------------------------------------------

		align	$8000		; must be aligned to bank. By the way, these are also used in Z80.asm. Be sure to check it out
fLog:		incbin "AMPS/filters/Logarithmic.dat"	; logarithmic filter (no filter)
;fLinear:	incbin "AMPS/filters/Linear.dat"	; linear filter (no filter)

dacaddr		dcb.b Z80E_Read*(MaxPitch/$100),$00
SWF_Stop:	dcb.b $8000-(2*Z80E_Read*(MaxPitch/$100)),$80
SWFR_Stop:	dcb.b Z80E_Read*(MaxPitch/$100),$00
; ---------------------------------------------------------------------------

	incSWF	Kick, Timpani, Snare, Sega
	opt ae+				; enable automatic evens
	list				; continue source listing
; ---------------------------------------------------------------------------
